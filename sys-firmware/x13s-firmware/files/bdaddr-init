#!/sbin/openrc-run
description="Applies bdaddr fix (per kernel patch comment)."

depend()
{
	after sshd
	before bluetooth
}

start()
{
	: ${bdaddr:=BDADDR}

	ebegin "Setting BDADDR to complete qualcomm vendor string"
	bluetoothctl mgmt.public-addr "$bdaddr" > /dev/null 2>&1
	eend $? "Error setting BDADDR $bdaddr" || return $?

	sleep 1
	return 0
}
